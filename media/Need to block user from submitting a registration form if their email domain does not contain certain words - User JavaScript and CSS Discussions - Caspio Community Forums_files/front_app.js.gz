;(function($,_,undefined){"use strict";ips.controller.mixin('events','core.front.core.commentFeed',true,function(){this.quoteComment=((e,data)=>{ips.ui.editor.getObjWithInit(this.scope.find('[data-role="replyArea"] [data-ipsEditor]'),function(editor){editor.insertQuotes([data]);try{if(IpsDataLayerConfig&&IpsDataLayerConfig._events.content_quote.enabled){let context=IpsDataLayerContext||{};$('body').trigger('ipsDataLayer',{_key:'content_quote',_properties:context,_analytics_full_only:true});}}catch(e){}});}).bind(this);this.addMultiQuote=((e,data)=>{var mqData=this._getMultiQuoteData();var key=data.contentapp+'-'+data.contenttype+'-'+data.contentcommentid;if(_.size(mqData)==this._maximumMultiQuote){ips.ui.alert.show({type:'alert',icon:'warn',message:ips.pluralize(ips.getString('maxmultiquote'),this._maximumMultiQuote),callbacks:{ok:function(){$("button[data-mqId='"+data.button+"']").removeClass('ipsButton_alternate').addClass('ipsButton_simple').removeAttr('data-mqActive').html(ips.templates.render('core.posts.multiQuoteOff'));}}});return false;}
mqData[key]=data;ips.utils.db.set('mq','data',mqData);try{if(IpsDataLayerConfig&&IpsDataLayerConfig._events.content_quote.enabled){let context=IpsDataLayerContext||{};$('body').trigger('ipsDataLayer',{_key:'content_quote',_properties:context,_analytics_full_only:true,});}}catch(e){}
this._buildMultiQuote(_.size(mqData));}).bind(this);});}(jQuery,_));;
;(function($,_,undefined){"use strict";ips.controller.mixin('events','core.front.core.dataLayer',true,function(){const originalSetup=this.setup;this.setup=(()=>{originalSetup.bind(this)();if(!(ipsSettings.features&&ipsSettings.features.analytics_full)){return;}
this.on('menuItemSelected',this.sortFilter);}).bind(this);const originalHandleEvent=this.handleEvent.bind(this);this.handleEvent=((evt,event)=>{if((event._analytics_full_only)&&!(ipsSettings.features&&ipsSettings.features.analytics_full)){return;}
return originalHandleEvent(evt,event);}).bind(this);const originalHandleProperties=this.handleProperties.bind(this);this.handleProperties=((evt,event)=>{if((event._analytics_full_only)&&!(ipsSettings.features&&ipsSettings.features.analytics_full)){return;}
return originalHandleProperties(evt,event);}).bind(this);this.sortFilter=function(event,data){let item=$(data.selectedItems[Object.keys(data.selectedItems)[0]]);let parent=data.menuElem;let action=null;let properties={};if(parent.attr('id').includes('elSortBy')){action='sort';properties.sort_by=item.data().ipsmenuvalue;let directions={asc:'asc',desc:'desc'};properties.sort_direction=(item.data().sortdirection||'asc'||ips.utils.url.getParam('sortdirection')).toLowerCase();properties.sort_direction=directions[properties.sort_direction]||'asc';}else if(parent.attr('id').includes('elFilterBy')){action='filter_add';properties['filter_title']=item.data().ipsmenuvalue;}else{return;}
let typeMap={forums:'topic',blogs:'entry',calendar:'event',gallery:'image'};let areaKey=IpsDataLayerConfig._properties.community_area.formatted_name;let area=IpsDataLayerContext[areaKey];if(area){properties['content_type']=typeMap[area]||null;}
this.scope.trigger('ipsDataLayer',{_key:action,_properties:properties,_analytics_full_only:true});};});}(jQuery,_));;
;(function($,_){"use strict";ips.controller.mixin('events','forums.front.forum.flow',true,function(){this.toggleFilters=((e)=>{e.preventDefault();var link=$(e.currentTarget);var id=link.attr('data-node-id');var parentId=link.attr('data-parent-id');var hasChildren=link.attr('data-has-children');let action='filter_add';if(_.indexOf(this._ids,id)==-1){this.childSelect(id,false);}else{action='filter_remove';this.childUnselect(id);}
try{if(!window.IpsDataLayerConfig&&IpsDataLayerConfig){let item=$(e.currentTarget).find('.cForumMiniList_title');let label=(item?item.text():$(e.currentTarget).text()).trim(['\n','\t']).split('\n')[0];let url=$(e.currentTarget).attr('href')||null;let properties={filter_title:label,community_area:'forums',content_area:'forums',content_type:'topic',content_container_id:id,content_container_url:url,content_container_name:label,content_container_type:'forum'};this.scope.trigger('ipsDataLayer',{_key:action,_properties:properties,_analytics_full_only:true});}}catch(e){}
this._updateButtonText();$(document).trigger('updateTableURL',{[this.urlParam]:_.uniq(_.values(this._ids)).join(',')});}).bind(this);});}(jQuery,_));;